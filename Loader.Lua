-- BALLXZ HUB Advanced Macro (2025-05-02 08:21)
local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()
local Players, RunService, VIM = game:GetService("Players"), game:GetService("RunService"), game:GetService("VirtualInputManager")
local LP = Players.LocalPlayer
local Window = Rayfield:CreateWindow({ Name = "BALLXZ HUB", Theme = "Default" })
local MainTab = Window:CreateTab("âš™ï¸ Main", 4483362458)

-- â˜‘ï¸ Global Vars
local MacroRecording, MacroPlaying, MacroData, AutoMacro = false, false, {}, true

-- ðŸ”´ Start / Stop Macro Recording
MainTab:CreateButton({
   Name = "ðŸ”´ à¹€à¸£à¸´à¹ˆà¸¡/à¸«à¸¢à¸¸à¸” à¸­à¸±à¸” Macro",
   Callback = function()
      MacroRecording = not MacroRecording
      Rayfield:Notify({
         Title = "Macro",
         Content = MacroRecording and "à¹€à¸£à¸´à¹ˆà¸¡à¸­à¸±à¸”" or "à¸«à¸¢à¸¸à¸”à¸­à¸±à¸”",
         Duration = 3
      })

      if MacroRecording then
         MacroData = {}
         local startTime = tick()

         RunService.Heartbeat:Connect(function()
            if not MacroRecording then return end
            local char = LP.Character
            if not char or not char:FindFirstChild("HumanoidRootPart") then return end

            table.insert(MacroData, {
               Time = tick() - startTime,
               Position = char.HumanoidRootPart.CFrame,
               ToolUsed = (char:FindFirstChildOfClass("Tool") and char:FindFirstChildOfClass("Tool").Name) or nil
            })
         end)
      end
   end
})

-- â–¶ï¸ à¹€à¸¥à¹ˆà¸™ Macro
MainTab:CreateButton({
   Name = "â–¶ï¸ à¹€à¸¥à¹ˆà¸™ Macro",
   Callback = function()
      if #MacroData == 0 then
         Rayfield:Notify({ Title = "Macro", Content = "à¸¢à¸±à¸‡à¹„à¸¡à¹ˆà¸¡à¸µà¸à¸²à¸£à¸­à¸±à¸”", Duration = 2 })
         return
      end

      MacroPlaying = true
      local char = LP.Character or LP.CharacterAdded:Wait()
      local root = char:WaitForChild("HumanoidRootPart")

      Rayfield:Notify({ Title = "Macro", Content = "à¸à¸³à¸¥à¸±à¸‡à¹€à¸¥à¹ˆà¸™...", Duration = 3 })

      for i, step in ipairs(MacroData) do
         if not MacroPlaying then break end
         task.wait(step.Time - (MacroData[i-1] and MacroData[i-1].Time or 0))

         root.CFrame = step.Position

         -- à¹ƒà¸Šà¹‰ Tool à¸«à¸²à¸à¸¡à¸µà¸Šà¸·à¹ˆà¸­à¸—à¸µà¹ˆà¸•à¸£à¸‡
         if step.ToolUsed and char:FindFirstChild(step.ToolUsed) then
            local tool = char:FindFirstChild(step.ToolUsed)
            tool:Activate()
         end
      end

      MacroPlaying = false
      Rayfield:Notify({ Title = "Macro", Content = "à¹€à¸¥à¹ˆà¸™à¸ˆà¸šà¹à¸¥à¹‰à¸§", Duration = 3 })
   end
})

-- ðŸ” à¹€à¸›à¸´à¸”/à¸›à¸´à¸” Auto Macro
MainTab:CreateToggle({
   Name = "ðŸŸ¢ à¹€à¸›à¸´à¸” Auto Macro à¹€à¸¡à¸·à¹ˆà¸­à¹€à¸‚à¹‰à¸²à¹€à¸à¸¡",
   CurrentValue = true,
   Callback = function(state)
      AutoMacro = state
   end
})

-- ðŸ§  Auto start à¹€à¸¡à¸·à¹ˆà¸­à¹€à¸‚à¹‰à¸²à¹€à¸à¸¡à¹ƒà¸«à¸¡à¹ˆ
if AutoMacro then
   task.wait(5) -- à¸£à¸­à¹‚à¸«à¸¥à¸” map
   if #MacroData > 0 then
      local root = LP.Character:WaitForChild("HumanoidRootPart")
      for i, step in ipairs(MacroData) do
         task.wait(step.Time - (MacroData[i-1] and MacroData[i-1].Time or 0))
         root.CFrame = step.Position
         if step.ToolUsed then
            local tool = LP.Character:FindFirstChild(step.ToolUsed)
            if tool then tool:Activate() end
         end
      end
   end
end
